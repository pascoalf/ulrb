<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>ulrb: Unsupervised Learning Based Definition of Microbial Rare Biosphere — ulrb-package • ulrb</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="ulrb: Unsupervised Learning Based Definition of Microbial Rare Biosphere — ulrb-package"><meta name="description" content="The R package ulrb stands for Unsupervised Machine Learning definition of the
  Rare Biosphere. As the name suggests, it applies unsupervised learning principles
  to define the rare biosphere.
More specifically, the partitioning around medoids (k-medoids) algorithm is used
  to divide phylogenetic units (ASVs, OTUs, Species, …) within a microbial community
  (usually, a sample) into clusters. The clusters are then ordered based on a user-defined
  classification vector. By default, our method classifies all phylogenetic units in one
  of these: “rare”, “undetermined” or “abundant”. In alternative, we provide functions
  to help the user decide the number of clusters and we also provide a fully automated
  option. Besides clustering, we have functions to help you evaluate the clustering
  quality (e.g. silhouette scores).
For detailed theory behind our reasoning for this definition of the microbial rare biosphere,
  results and applications, see our paper Pascoal et al., 2023 (in preparation).
  For more details on the R functions used and data wrangling please see the package documentation."><meta property="og:description" content="The R package ulrb stands for Unsupervised Machine Learning definition of the
  Rare Biosphere. As the name suggests, it applies unsupervised learning principles
  to define the rare biosphere.
More specifically, the partitioning around medoids (k-medoids) algorithm is used
  to divide phylogenetic units (ASVs, OTUs, Species, …) within a microbial community
  (usually, a sample) into clusters. The clusters are then ordered based on a user-defined
  classification vector. By default, our method classifies all phylogenetic units in one
  of these: “rare”, “undetermined” or “abundant”. In alternative, we provide functions
  to help the user decide the number of clusters and we also provide a fully automated
  option. Besides clustering, we have functions to help you evaluate the clustering
  quality (e.g. silhouette scores).
For detailed theory behind our reasoning for this definition of the microbial rare biosphere,
  results and applications, see our paper Pascoal et al., 2023 (in preparation).
  For more details on the R functions used and data wrangling please see the package documentation."><meta property="og:image" content="https://pascoalf.github.io/ulrb/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ulrb</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/eco-analysis.html">Integration of ulrb in a simple microbial ecology workflow</a></li>
    <li><a class="dropdown-item" href="../articles/explore-classifications.html">Alternative classifications with ulrb</a></li>
    <li><a class="dropdown-item" href="../articles/Glossary.html">Glossary</a></li>
    <li><a class="dropdown-item" href="../articles/ulrb-vignet.html">Tutorial to define rare biosphere with ulrb</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pascoalf/ulrb/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>ulrb: Unsupervised Learning Based Definition of Microbial Rare Biosphere</h1>

      <div class="d-none name"><code>ulrb-package.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The R package ulrb stands for Unsupervised Machine Learning definition of the
  Rare Biosphere. As the name suggests, it applies unsupervised learning principles
  to define the rare biosphere.</p>
<p>More specifically, the partitioning around medoids (k-medoids) algorithm is used
  to divide phylogenetic units (ASVs, OTUs, Species, …) within a microbial community
  (usually, a sample) into clusters. The clusters are then ordered based on a user-defined
  classification vector. By default, our method classifies all phylogenetic units in one
  of these: “rare”, “undetermined” or “abundant”. In alternative, we provide functions
  to help the user decide the number of clusters and we also provide a fully automated
  option. Besides clustering, we have functions to help you evaluate the clustering
  quality (e.g. silhouette scores).</p>
<p>For detailed theory behind our reasoning for this definition of the microbial rare biosphere,
  results and applications, see our paper Pascoal et al., 2023 (in preparation).
  For more details on the R functions used and data wrangling please see the package documentation.</p>
    </div>


    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p></p><table class="table table"><tr><td>Name:</td><td>ulrb</td></tr><tr><td>Type:</td><td>Package</td></tr><tr><td>Version:</td><td>0.1.0</td></tr><tr><td><!-- %update! -->
      Date:</td><td>2023-11-13</td></tr><tr><td>License:</td><td>GPL 3</td></tr></table></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Pascoal, F., Paula, B., Torgo, L., Costa, R., Magalhães, C. (2023) <em>Unsupervised machine learning definition of the microbial rare biosphere</em> Manuscript in preparation.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Francisco Pascoal <a href="mailto:fpascoal1996@gmail.com">fpascoal1996@gmail.com</a>, Paula Branco
  <a href="mailto:paobranco@gmail.com">paobranco@gmail.com</a>, Luis Torgo, Rodrigo Costa <a href="mailto:rodrigoscosta@tecnico.ulisboa.pt">rodrigoscosta@tecnico.ulisboa.pt</a>, Catarina Magalhães <a href="mailto:catarinamagalhaes1972@gmail.com">catarinamagalhaes1972@gmail.com</a></p>
<p>Maintainer:
    Francisco Pascoal</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span>  <span class="co"># \donttest{</span></span></span>
<span class="r-in"><span>    <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pascoalf.github.io/ulrb/">ulrb</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="co"># nice is an OTU table in wide format</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">nice</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ERR2044662 ERR2044663 ERR2044664 ERR2044665 ERR2044666 ERR2044667 ERR2044668</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        165        323         51         70        134        216          0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          0          0          1          0          0          1          0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          0          0          1          2          2          6          0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4        541       1018        351        115        241       1633        177</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5          8          5         41         15         14        146          0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         15         31        590        133        174       1814         12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ERR2044669 ERR2044670   OTU      Domain            Phylum</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         11          0 OTU_2 sk__Archaea  p__Euryarchaeota</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          0          0 OTU_3 sk__Archaea  p__Euryarchaeota</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          0          0 OTU_4 sk__Archaea  p__Euryarchaeota</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       1371          7 OTU_5 sk__Archaea  p__Euryarchaeota</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         14          0 OTU_6 sk__Archaea p__Thaumarchaeota</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6        173          2 OTU_7 sk__Archaea p__Thaumarchaeota</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       Class                       Order Family</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 c__Candidatus_Poseidoniia                        &lt;NA&gt;   &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 c__Candidatus_Poseidoniia o__Candidatus_Poseidoniales    f__</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           c__Halobacteria          o__Halobacteriales   &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         c__Thermoplasmata                        &lt;NA&gt;   &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                      &lt;NA&gt;                        &lt;NA&gt;   &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                       c__                         o__    f__</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                            Genus                                        Species</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                           &lt;NA&gt;                                           &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                            g__ s__Marine_group_II_euryarchaeote_REDSEA-S03_B6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                           &lt;NA&gt;                                           &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                           &lt;NA&gt;                                           &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                           &lt;NA&gt;                                           &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 g__Candidatus_Nitrosopelagicus                                           &lt;NA&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="co"># first, we tidy the "nice" OTU table</span></span></span>
<span class="r-in"><span>    <span class="va">sample_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ERR2044662"</span>, <span class="st">"ERR2044663"</span>, <span class="st">"ERR2044664"</span>,</span></span>
<span class="r-in"><span>                      <span class="st">"ERR2044665"</span>, <span class="st">"ERR2044666"</span>, <span class="st">"ERR2044667"</span>,</span></span>
<span class="r-in"><span>                      <span class="st">"ERR2044668"</span>, <span class="st">"ERR2044669"</span>, <span class="st">"ERR2044670"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="co"># If data is in wide format, with samples in cols</span></span></span>
<span class="r-in"><span>    <span class="va">nice_tidy</span> <span class="op">&lt;-</span> <span class="fu"><a href="prepare_tidy_data.html">prepare_tidy_data</a></span><span class="op">(</span><span class="va">nice</span>,</span></span>
<span class="r-in"><span>                                   sample_names <span class="op">=</span> <span class="va">sample_names</span>,</span></span>
<span class="r-in"><span>                                   samples_in <span class="op">=</span> <span class="st">"cols"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="co"># second, we apply ulrb algorithm in automatic setting</span></span></span>
<span class="r-in"><span>    <span class="va">nice_classification_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="define_rb.html">define_rb</a></span><span class="op">(</span><span class="va">nice_tidy</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(Sample, Level)`</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="co"># third, we plot microbial community and the quality of k-medoids clustering</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="plot_ulrb.html">plot_ulrb</a></span><span class="op">(</span><span class="va">nice_classification_results</span>, taxa_col <span class="op">=</span> <span class="st">"OTU"</span>, plot_all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="ulrb-package-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="co"># In case you want to inspect the result of a particular sample, do:</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="plot_ulrb.html">plot_ulrb</a></span><span class="op">(</span><span class="va">nice_classification_results</span>, taxa_col <span class="op">=</span> <span class="st">"OTU"</span>, sample_id <span class="op">=</span> <span class="st">"ERR2044662"</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>If you want to plot only ERR2044662 use plot_all = FALSE</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>If you want to plot only ERR2044662 use plot_all = FALSE</span>
<span class="r-plt img"><img src="ulrb-package-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span>        <span class="co"># }</span></span></span>
<span class="r-in"><span>  </span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Francisco Pascoal, Paula Branco, Luís Torgo, Rodrigo Costa, Catarina Magalhães.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

